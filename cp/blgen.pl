sub prime{
	for(2..int(sqrt($_[0])+0.5)){
		return 0 if $_[0]%$_==0;
	}
	return 1;
}

for$c(0..1){
@t=(<>=~m/\d+/g);
$a[$c][0]=0;
for(@t){
	$x=int(exp(log($_)/3)+0.5);
	$a[$c][++$a[$c][0]]=$_ if(($x**3==$_ && prime($x)) || (int(sqrt($_)+0.5)**2==$_));
}
}
$f[$a[0][0]][$a[1][0]]=0;
for $i(1..$a[0][0]){for $j(1..$a[1][0]){
	$f[$i][$j]=$f[$i-1][$j]>$f[$i][$j-1] ? $f[$i-1][$j]:$f[$i][$j-1];
	$f[$i][$j]=$f[$i-1][$j-1]+1 if $a[0][$i]==$a[1][$j];
}}
print $f[$a[0][0]][$a[1][0]];
